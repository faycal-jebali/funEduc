import{a as Q,b as W,c as X,d as Y,e as Z,f as tt,g as et,h as it,i as nt,j as ot,k as at}from"./chunk-JX7MXFC3.js";import{a as q,b as z}from"./chunk-36YV34MB.js";import{b as L,f as O,g as J,j as K,k as P}from"./chunk-J7QNAIPP.js";import{b as R,c as S,e as $,f as H,i as U,k as A,n as B,r as G,t as j}from"./chunk-THUYKHO4.js";import{a as V,b as k,d as N}from"./chunk-FBW2AEII.js";import"./chunk-H7H6RDXH.js";import{a as F}from"./chunk-ZANDB5YP.js";import"./chunk-LFBO2YDB.js";import{Db as d,Mb as i,Nb as n,Ob as u,Pb as _,Qb as h,Rc as D,Sb as w,Ub as c,Vb as b,Xc as E,a as g,bb as m,ec as a,ed as y,fc as x,gb as M,gc as v,gd as T,nb as I,pa as f,qa as C,rb as s}from"./chunk-6OGJQNIW.js";function lt(t,r){if(t&1){let e=w();i(0,"button",14),c("click",function(){f(e);let o=b();return C(o.resetForm())}),a(1," Annuler "),n()}}function rt(t,r){t&1&&(i(0,"th",15),a(1,"Nom"),n())}function mt(t,r){if(t&1&&(i(0,"td",16),a(1),n()),t&2){let e=r.$implicit;m(),x(e.title)}}function st(t,r){t&1&&(i(0,"th",15),a(1,"Alias"),n())}function dt(t,r){if(t&1&&(i(0,"td",16),a(1),n()),t&2){let e=r.$implicit;m(),x(e.alias)}}function ut(t,r){t&1&&(i(0,"th",15),a(1,"Actions"),n())}function ct(t,r){if(t&1){let e=w();i(0,"td",16)(1,"button",17),c("click",function(){let o=f(e).$implicit,p=b();return C(p.edit(o))}),i(2,"mat-icon"),a(3,"edit"),n()(),i(4,"button",18),c("click",function(){let o=f(e).$implicit,p=b();return C(p.delete(o.id))}),i(5,"mat-icon"),a(6,"delete"),n()()()}}function pt(t,r){t&1&&u(0,"tr",19)}function ft(t,r){t&1&&u(0,"tr",20)}var kt=(()=>{class t{constructor(e,l){this.fb=e,this.http=l,this.displayedColumns=["title","alias","actions"],this.classes=[],this.editingId=null,this.apiUrl=F.apiUrl,this.form=this.fb.group({id:[""],title:["",S.required],alias:["",S.required]})}ngOnInit(){this.loadClasses()}loadClasses(){this.http.get(`${this.apiUrl}/classes/classes`).subscribe(e=>{this.classes=e})}submit(){if(this.form.invalid)return;let e=this.form.value;if(this.editingId)this.http.put(`${this.apiUrl}/classes/${this.editingId}`,e).subscribe(()=>{this.resetForm(),this.loadClasses()});else{let l=g({},e);this.http.post(`${this.apiUrl}/classes/classes`,l).subscribe(()=>{this.resetForm(),this.loadClasses()})}}edit(e){this.editingId=e.id,this.form.patchValue(e)}delete(e){this.http.delete(`${this.apiUrl}/classes/${e}`).subscribe(()=>{this.loadClasses()})}resetForm(){this.form.reset(),this.editingId=null}static{this.\u0275fac=function(l){return new(l||t)(M(G),M(y))}}static{this.\u0275cmp=I({type:t,selectors:[["app-class-crud"]],decls:24,vars:6,consts:[[1,"space-y-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","title"],["matInput","","formControlName","alias"],["mat-raised-button","","color","primary","type","submit"],["mat-button","","type","button",3,"click",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","w-full","mt-8",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","alias"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-button","","type","button",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(l,o){l&1&&(i(0,"form",0),c("ngSubmit",function(){return o.submit()}),i(1,"mat-form-field",1)(2,"mat-label"),a(3,"Nom de la classe"),n(),u(4,"input",2),n(),i(5,"mat-form-field",1)(6,"mat-label"),a(7,"Alias"),n(),u(8,"input",3),n(),i(9,"button",4),a(10),n(),s(11,lt,2,0,"button",5),n(),i(12,"table",6),_(13,7),s(14,rt,2,0,"th",8)(15,mt,2,1,"td",9),h(),_(16,10),s(17,st,2,0,"th",8)(18,dt,2,1,"td",9),h(),_(19,11),s(20,ut,2,0,"th",8)(21,ct,7,0,"td",9),h(),s(22,pt,1,0,"tr",12)(23,ft,1,0,"tr",13),n()),l&2&&(d("formGroup",o.form),m(10),v(" ",o.editingId?"Modifier":"Cr\xE9er"," "),m(),d("ngIf",o.editingId),m(),d("dataSource",o.classes),m(10),d("matHeaderRowDef",o.displayedColumns),m(),d("matRowDefColumns",o.displayedColumns))},dependencies:[E,D,j,U,R,$,H,A,B,T,J,O,L,P,K,N,k,V,at,Q,X,et,Y,W,it,Z,tt,nt,ot,z,q],encapsulation:2})}}return t})();export{kt as ClassCrudComponent};
