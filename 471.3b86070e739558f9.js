"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[471],{471:(N,_,n)=>{n.r(_),n.d(_,{SectionExercicesFormComponent:()=>R});var e=n(7705),u=n(177),s=n(9417),g=n(7062),h=n(4950),C=n(3693),F=n(8132),f=n(9631),p=n(2798),d=n(8834),m=n(882),E=n(9213),x=n(1494),v=n(6600);function b(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Le titre est requis. "),e.k0s())}function j(o,c){if(1&o&&(e.j41(0,"mat-option",17),e.EFF(1),e.k0s()),2&o){const t=c.$implicit;e.Y8G("value",t.id),e.R7$(1),e.SpI(" ",t.title," ")}}function k(o,c){if(1&o&&(e.j41(0,"mat-option",17),e.EFF(1),e.k0s()),2&o){const t=c.$implicit;e.Y8G("value",t.id),e.R7$(1),e.SpI(" ",t.title," ")}}function I(o,c){if(1&o&&(e.j41(0,"mat-option",17),e.EFF(1),e.k0s()),2&o){const t=c.$implicit;e.Y8G("value",t.id),e.R7$(1),e.SpI(" ",t.title," ")}}function S(o,c){if(1&o&&(e.j41(0,"mat-option",17),e.EFF(1),e.k0s()),2&o){const t=c.$implicit;e.Y8G("value",t.id),e.R7$(1),e.SpI(" ",t.title," ")}}function O(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La le\xe7on est requise. "),e.k0s())}function y(o,c){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"mat-form-field",4),e.nrm(2,"input",37),e.k0s(),e.j41(3,"button",21),e.bIt("click",function(){const l=e.eBV(t).index,a=e.XpG(2).index,T=e.XpG();return e.Njj(T.removeOption(a,l))}),e.j41(4,"mat-icon"),e.EFF(5,"delete"),e.k0s()()()}if(2&o){const t=c.index;e.R7$(2),e.Y8G("formControlName",t)}}function D(o,c){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"mat-label"),e.EFF(2,"Options :"),e.k0s(),e.j41(3,"div",35),e.DNE(4,y,6,1,"div",36),e.k0s(),e.j41(5,"button",15),e.bIt("click",function(){e.eBV(t);const r=e.XpG().index,l=e.XpG();return e.Njj(l.addOption(r))}),e.EFF(6," Ajouter une option "),e.k0s()()}if(2&o){const t=e.XpG().index,i=e.XpG();e.R7$(4),e.Y8G("ngForOf",i.getOptions(t).controls)}}function M(o,c){if(1&o){const t=e.RV6();e.j41(0,"div",18)(1,"h3",19)(2,"span",20),e.EFF(3),e.k0s(),e.EFF(4," Exercice "),e.j41(5,"button",21),e.bIt("click",function(){const l=e.eBV(t).index,a=e.XpG();return e.Njj(a.removeExercice(l))}),e.j41(6,"mat-icon"),e.EFF(7,"delete"),e.k0s()()(),e.j41(8,"div",22)(9,"mat-form-field",4)(10,"mat-label"),e.EFF(11,"Consigne :"),e.k0s(),e.nrm(12,"input",23),e.k0s(),e.j41(13,"mat-form-field",4)(14,"mat-label"),e.EFF(15,"Question :"),e.k0s(),e.nrm(16,"input",24),e.k0s(),e.j41(17,"mat-form-field",4)(18,"mat-label"),e.EFF(19,"R\xe9ponse Correcte :"),e.k0s(),e.nrm(20,"input",25),e.k0s(),e.j41(21,"mat-form-field",4)(22,"mat-label"),e.EFF(23,"Type :"),e.k0s(),e.j41(24,"mat-select",26)(25,"mat-option",27),e.EFF(26,"Compl\xe9ter les blancs"),e.k0s(),e.j41(27,"mat-option",28),e.EFF(28,"Choix multiples"),e.k0s(),e.j41(29,"mat-option",29),e.EFF(30,"Dict\xe9e"),e.k0s()()(),e.DNE(31,D,7,1,"div",6),e.j41(32,"mat-form-field",4)(33,"mat-label"),e.EFF(34,"Difficult\xe9 :"),e.k0s(),e.j41(35,"mat-select",30)(36,"mat-option",31),e.EFF(37,"Facile"),e.k0s(),e.j41(38,"mat-option",32),e.EFF(39,"Moyenne"),e.k0s(),e.j41(40,"mat-option",33),e.EFF(41,"Difficile"),e.k0s()()(),e.j41(42,"mat-form-field",4)(43,"mat-label"),e.EFF(44,"Explication :"),e.k0s(),e.nrm(45,"textarea",34),e.k0s()()()}if(2&o){const t=c.$implicit,i=c.index;let r;e.Y8G("formGroupName",i),e.R7$(3),e.JRh(i+1),e.R7$(9),e.Mz_("id","consigne-",i,""),e.R7$(4),e.Mz_("id","question-",i,""),e.R7$(4),e.Mz_("id","correct_answer-",i,""),e.R7$(4),e.Mz_("id","type-",i,""),e.R7$(7),e.Y8G("ngIf","multiple-choice"===(null==(r=t.get("type"))?null:r.value)),e.R7$(4),e.Mz_("id","difficulty-",i,""),e.R7$(10),e.Mz_("id","explanation-",i,"")}}let R=(()=>{class o{constructor(t,i){this.fb=t,this.fullStructureSubjectsService=i,this.fullStructure=[],this.courses=[],this.selectedClassId="",this.selectedCourseId="",this.selectedCategoryId="",this.selectedSubLessonId="",this.selectedClass=null,this.selectedCourse=null,this.selectedCategory=null,this.exercicesService=(0,e.WQX)(C.I),this.exerciceSectionService=(0,e.WQX)(h.$),this.router=(0,e.WQX)(g.Ix),this.form=this.fb.group({section:this.fb.group({title:["",s.k0.required],description:[""],created_by:[F.gG.ADMIN],class_id:["",s.k0.required],lesson_id:["",s.k0.required],category_id:["",s.k0.required],subLesson_id:["",s.k0.required]}),exercices:this.fb.array([])}),this.onLessonChange(),this.onClassChange(),this.onCategoryChange()}ngOnInit(){this.getStructureSubjects()}getStructureSubjects(){this.fullStructureSubjectsService.getFullStructureSubjects().subscribe({next:t=>{this.fullStructure=t,this.courses=t,console.log("this.courses : ",this.courses)},error:t=>{console.error("Erreur lors du chargement des le\xe7ons:",t)}})}onClassChange(){this.form?.get("section")?.get("class_id")?.valueChanges.subscribe({next:t=>{this.selectedClassId=t,this.selectedClass=this.fullStructure.find(i=>i.id===this.selectedClassId),console.log("this.selectedClass  : ",this.selectedClass),this.selectedCourseId="",this.selectedCategoryId="",this.selectedSubLessonId="",this.selectedCategory=null}})}onLessonChange(){this.form?.get("section")?.get("lesson_id")?.valueChanges.subscribe({next:t=>{this.selectedCourseId=t,console.log("selectedCourseId : ",this.selectedCourseId),this.selectedCourse=this.selectedClass.children.find(i=>i.id===this.selectedCourseId),console.log("this.selectedCourse  : ",this.selectedCourse),this.selectedCategoryId="",this.selectedSubLessonId=""}})}onCategoryChange(){this.form?.get("section")?.get("category_id")?.valueChanges.subscribe({next:t=>{this.selectedCategoryId=t,this.selectedCategory=this.selectedCourse?.children.find(i=>i.id===this.selectedCategoryId),this.selectedSubLessonId=""}})}get exercices(){return this.form.get("exercices")}addExercice(){this.exercices.push(this.createExerciceForm())}removeExercice(t){this.exercices.removeAt(t)}createExerciceForm(){return this.fb.group({type:["fill-in-the-blank",s.k0.required],consigne:[""],question:["",s.k0.required],correct_answer:["",s.k0.required],options:this.fb.array([]),explanation:[""],difficulty:["easy",s.k0.required],section_id:[""]})}getOptions(t){return this.exercices.at(t).get("options")}addOption(t){this.getOptions(t).push(new s.MJ("",s.k0.required))}removeOption(t,i){this.getOptions(t).removeAt(i)}submit(){this.form.valid?this.exerciceSectionService.createSectionWithExercices(this.form.value).subscribe({next:()=>{alert("Section et exercices cr\xe9\xe9s avec succ\xe8s !")},error:t=>{alert("Erreur lors de l'enregistrement."),console.error(t)}}):alert("Veuillez remplir tous les champs requis.")}static{this.\u0275fac=function(i){return new(i||o)(e.rXU(s.ok),e.rXU(x.L))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-section-exercice-form"]],standalone:!0,features:[e.aNF],decls:49,vars:8,consts:[[1,"section-exercice-container"],[3,"formGroup","ngSubmit"],[1,"primary-color"],["formGroupName","section",1,"grid-form"],["appearance","fill"],["matInput","","formControlName","title","type","text"],[4,"ngIf"],["formControlName","class_id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","lesson_id"],["formControlName","category_id"],["formControlName","subLesson_id"],["matInput","","formControlName","description"],["formArrayName","exercices"],["class","box-border-radius",3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","accent","type","submit"],[3,"value"],[1,"box-border-radius",3,"formGroupName"],[1,"box-exercice-form"],[1,"item-numero"],["mat-icon-button","",3,"click"],[1,"grid-form"],["matInput","","formControlName","consigne","type","text",3,"id"],["matInput","","formControlName","question","type","text",3,"id"],["matInput","","formControlName","correct_answer","type","text",3,"id"],["formControlName","type",3,"id"],["value","fill-in-the-blank"],["value","multiple-choice"],["value","dictation"],["formControlName","difficulty",3,"id"],["value","easy"],["value","medium"],["value","hard"],["matInput","","formControlName","explanation",3,"id"],["formArrayName","options"],[4,"ngFor","ngForOf"],["matInput","","type","text",3,"formControlName"]],template:function(i,r){if(1&i&&(e.j41(0,"div",0)(1,"h1"),e.EFF(2,"Cr\xe9er une Section et ses Exercices"),e.k0s(),e.j41(3,"form",1),e.bIt("ngSubmit",function(){return r.submit()}),e.j41(4,"h2",2),e.EFF(5,"Section"),e.k0s(),e.j41(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),e.EFF(9,"Titre de la Section :"),e.k0s(),e.nrm(10,"input",5),e.DNE(11,b,2,0,"mat-error",6),e.k0s(),e.j41(12,"mat-form-field",4)(13,"mat-label"),e.EFF(14,"Classes :"),e.k0s(),e.j41(15,"mat-select",7),e.DNE(16,j,2,2,"mat-option",8),e.k0s()(),e.j41(17,"mat-form-field",4)(18,"mat-label"),e.EFF(19,"Le\xe7on :"),e.k0s(),e.j41(20,"mat-select",9),e.DNE(21,k,2,2,"mat-option",8),e.k0s()(),e.j41(22,"mat-form-field",4)(23,"mat-label"),e.EFF(24,"Cat\xe9gorie :"),e.k0s(),e.j41(25,"mat-select",10),e.DNE(26,I,2,2,"mat-option",8),e.k0s()(),e.j41(27,"mat-form-field",4)(28,"mat-label"),e.EFF(29,"Sous-Le\xe7on :"),e.k0s(),e.j41(30,"mat-select",11),e.DNE(31,S,2,2,"mat-option",8),e.k0s()(),e.DNE(32,O,2,0,"mat-error",6),e.j41(33,"mat-form-field",4)(34,"mat-label"),e.EFF(35,"Description :"),e.k0s(),e.nrm(36,"textarea",12),e.k0s()(),e.j41(37,"div",13)(38,"h2",2),e.EFF(39,"Exercices"),e.k0s(),e.DNE(40,M,46,9,"div",14),e.k0s(),e.j41(41,"div")(42,"button",15),e.bIt("click",function(){return r.addExercice()}),e.EFF(43," Ajouter un Exercice "),e.k0s(),e.nrm(44,"br")(45,"br"),e.k0s(),e.j41(46,"div")(47,"button",16),e.EFF(48," Enregistrer "),e.k0s()()()()),2&i){let l,a;e.R7$(3),e.Y8G("formGroup",r.form),e.R7$(8),e.Y8G("ngIf",(null==(l=r.form.get("section.title"))?null:l.invalid)&&(null==(l=r.form.get("section.title"))?null:l.touched)),e.R7$(5),e.Y8G("ngForOf",r.courses),e.R7$(5),e.Y8G("ngForOf",null==r.selectedClass?null:r.selectedClass.children),e.R7$(5),e.Y8G("ngForOf",null==r.selectedCourse?null:r.selectedCourse.children),e.R7$(5),e.Y8G("ngForOf",null==r.selectedCategory?null:r.selectedCategory.children),e.R7$(1),e.Y8G("ngIf",(null==(a=r.form.get("section.lesson"))?null:a.invalid)&&(null==(a=r.form.get("section.lesson"))?null:a.touched)),e.R7$(8),e.Y8G("ngForOf",r.exercices.controls)}},dependencies:[u.MD,u.Sq,u.bT,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,s.$R,s.v8,f.fS,f.fg,m.rl,m.nJ,m.TL,p.Ve,p.VO,v.wT,d.Hl,d.$z,d.iY,m.RG,E.m_,E.An],styles:[".grid-form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:10px}.box-border-radius[_ngcontent-%COMP%]{border:2px solid #ff4081;padding:10px;border-radius:10px;margin-bottom:20px}.item-numero[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;width:30px;height:30px;line-height:3Opx;font-weight:700;color:#fff;text-align:center;background:#ff4081;border-radius:100%}.box-exercice-form[_ngcontent-%COMP%]{display:flex;justify-items:center;align-items:center;gap:5px;flex-direction:row}.primary-color[_ngcontent-%COMP%]{color:#ff4081}"]})}}return o})()}}]);