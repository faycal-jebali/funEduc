"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[957],{7957:(v,u,r)=>{r.r(u),r.d(u,{ExerciceFormComponent:()=>F});var a=r(177),e=r(7705),i=r(9417),m=r(8498),p=r(3987),_=r(3693);function f(o,l){if(1&o){const t=e.RV6();e.j41(0,"div"),e.nrm(1,"input",25),e.j41(2,"button",24),e.bIt("click",function(){const s=e.eBV(t).index,x=e.XpG(2);return e.Njj(x.removeOption(s))}),e.EFF(3,"\u274c"),e.k0s()()}if(2&o){const t=l.index;e.R7$(1),e.Y8G("formControlName",t)}}function d(o,l){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"label"),e.EFF(2,"Options :"),e.k0s(),e.j41(3,"div",22),e.DNE(4,f,4,1,"div",23),e.k0s(),e.j41(5,"button",24),e.bIt("click",function(){e.eBV(t);const c=e.XpG();return e.Njj(c.addOption())}),e.EFF(6,"\u2795 Ajouter une option"),e.k0s()()}if(2&o){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.options.controls)}}function E(o,l){if(1&o&&(e.j41(0,"option",26),e.EFF(1),e.k0s()),2&o){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(1),e.SpI(" ",t.title," ")}}let F=(()=>{class o{constructor(t){this.fb=t,this.sections=[],this.exercicesService=(0,e.WQX)(_.I),this.exerciceSectionService=(0,e.WQX)(p.$),this.router=(0,e.WQX)(m.Ix),this.exerciceForm=this.fb.group({type:["fill-in-the-blank",[i.k0.required]],question:["",[i.k0.required]],correct_answer:["",[i.k0.required]],options:this.fb.array([]),explanation:[""],difficulty:["easy",[i.k0.required]],created_by:["teacher",[i.k0.required]],section_id:["",[i.k0.required]]}),this.exerciceForm.get("type")?.valueChanges.subscribe(n=>{"multiple-choice"===n?this.addOption():this.clearOptions()})}ngOnInit(){this.loadSections()}loadSections(){this.exerciceSectionService.getExercicesBySection().subscribe(t=>{console.log("Sections charg\xe9es:",t),this.sections=t})}get options(){return this.exerciceForm.get("options")}addOption(){this.options.push(new i.MJ("",i.k0.required))}removeOption(t){this.options.removeAt(t)}clearOptions(){this.options.clear()}createExercice(){this.exerciceForm.valid?this.exercicesService.createExercice(this.exerciceForm.value).subscribe(t=>{alert("Exercice cr\xe9\xe9 avec succ\xe8s !"),this.exerciceForm.reset(),this.router.navigate(["/"])},t=>{alert("Erreur lors de la cr\xe9ation de l'exercice."),console.error(t)}):alert("Tous les champs sont requis.")}static{this.\u0275fac=function(n){return new(n||o)(e.rXU(i.ok))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-exercice-form"]],standalone:!0,features:[e.aNF],decls:36,vars:4,consts:[[1,"create-exercice"],[3,"formGroup","ngSubmit"],["for","question"],["id","question","formControlName","question","type","text"],["for","correct_answer"],["id","correct_answer","formControlName","correct_answer","type","text"],["for","type"],["id","type","formControlName","type"],["value","fill-in-the-blank"],["value","multiple-choice"],[4,"ngIf"],["for","section"],["id","section","formControlName","section_id"],[3,"value",4,"ngFor","ngForOf"],["for","difficulty"],["id","difficulty","formControlName","difficulty"],["value","easy"],["value","medium"],["value","hard"],["for","explanation"],["id","explanation","formControlName","explanation"],["type","submit",3,"disabled"],["formArrayName","options"],[4,"ngFor","ngForOf"],["type","button",3,"click"],["type","text",3,"formControlName"],[3,"value"]],template:function(n,c){if(1&n&&(e.j41(0,"div",0)(1,"h2"),e.EFF(2,"Cr\xe9er un Exercice"),e.k0s(),e.j41(3,"form",1),e.bIt("ngSubmit",function(){return c.createExercice()}),e.j41(4,"label",2),e.EFF(5,"Question :"),e.k0s(),e.nrm(6,"input",3),e.j41(7,"label",4),e.EFF(8,"R\xe9ponse Correcte :"),e.k0s(),e.nrm(9,"input",5),e.j41(10,"label",6),e.EFF(11,"Type :"),e.k0s(),e.j41(12,"select",7)(13,"option",8),e.EFF(14,"Compl\xe9ter les blancs"),e.k0s(),e.j41(15,"option",9),e.EFF(16,"Choix multiples"),e.k0s()(),e.DNE(17,d,7,1,"div",10),e.j41(18,"label",11),e.EFF(19,"Section :"),e.k0s(),e.j41(20,"select",12),e.DNE(21,E,2,2,"option",13),e.k0s(),e.j41(22,"label",14),e.EFF(23,"Difficult\xe9 :"),e.k0s(),e.j41(24,"select",15)(25,"option",16),e.EFF(26,"Facile"),e.k0s(),e.j41(27,"option",17),e.EFF(28,"Moyenne"),e.k0s(),e.j41(29,"option",18),e.EFF(30,"Difficile"),e.k0s()(),e.j41(31,"label",19),e.EFF(32,"Explication (facultatif) :"),e.k0s(),e.nrm(33,"textarea",20),e.j41(34,"button",21),e.EFF(35," \u2705 Cr\xe9er Exercice "),e.k0s()()()),2&n){let s;e.R7$(3),e.Y8G("formGroup",c.exerciceForm),e.R7$(14),e.Y8G("ngIf","multiple-choice"===(null==(s=c.exerciceForm.get("type"))?null:s.value)),e.R7$(4),e.Y8G("ngForOf",c.sections),e.R7$(13),e.Y8G("disabled",c.exerciceForm.invalid)}},dependencies:[a.MD,a.Sq,a.bT,i.X1,i.qT,i.xH,i.y7,i.me,i.wz,i.BC,i.cb,i.j4,i.JD,i.v8]})}}return o})()}}]);