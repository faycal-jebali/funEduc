import{a as N}from"./chunk-PLMGKJVH.js";import{a as O}from"./chunk-3HXKIMQA.js";import{b as q,c as m,e as w,f as V,h as T,i as k,k as A,m as D,n as I,o as M,p as G,q as j,r as R,t as B}from"./chunk-THUYKHO4.js";import"./chunk-ZANDB5YP.js";import{g as Q}from"./chunk-3MILEZSQ.js";import"./chunk-LFBO2YDB.js";import{Db as a,Mb as t,Nb as i,Ob as p,Qc as g,Rc as b,Sb as S,Ub as x,Vb as v,Xc as F,bb as l,ec as r,gb as h,gc as y,ja as d,nb as C,pa as _,qa as E,rb as f}from"./chunk-6OGJQNIW.js";function $(o,u){if(o&1){let e=S();t(0,"div"),p(1,"input",25),t(2,"button",24),x("click",function(){let n=_(e).index,s=v(2);return E(s.removeOption(n))}),r(3,"\u274C"),i()()}if(o&2){let e=u.index;l(),a("formControlName",e)}}function z(o,u){if(o&1){let e=S();t(0,"div")(1,"label"),r(2,"Options :"),i(),t(3,"div",22),f(4,$,4,1,"div",23),i(),t(5,"button",24),x("click",function(){_(e);let n=v();return E(n.addOption())}),r(6,"\u2795 Ajouter une option"),i()()}if(o&2){let e=v();l(4),a("ngForOf",e.options.controls)}}function H(o,u){if(o&1&&(t(0,"option",26),r(1),i()),o&2){let e=u.$implicit;a("value",e.id),l(),y(" ",e.title," ")}}var te=(()=>{class o{constructor(e){this.fb=e,this.sections=[],this.exercicesService=d(N),this.exerciceSectionService=d(O),this.router=d(Q),this.exerciceForm=this.fb.group({type:["fill-in-the-blank",[m.required]],question:["",[m.required]],correct_answer:["",[m.required]],options:this.fb.array([]),explanation:[""],difficulty:["easy",[m.required]],created_by:["teacher",[m.required]],section_id:["",[m.required]]}),this.exerciceForm.get("type")?.valueChanges.subscribe(c=>{c==="multiple-choice"?this.addOption():this.clearOptions()})}ngOnInit(){this.loadSections()}loadSections(){this.exerciceSectionService.getExercicesBySection().subscribe(e=>{console.log("Sections charg\xE9es:",e),this.sections=e})}get options(){return this.exerciceForm.get("options")}addOption(){this.options.push(new T("",m.required))}removeOption(e){this.options.removeAt(e)}clearOptions(){this.options.clear()}createExercice(){this.exerciceForm.valid?this.exercicesService.createExercice(this.exerciceForm.value).subscribe(e=>{alert("Exercice cr\xE9\xE9 avec succ\xE8s !"),this.exerciceForm.reset(),this.router.navigate(["/"])},e=>{alert("Erreur lors de la cr\xE9ation de l'exercice."),console.error(e)}):alert("Tous les champs sont requis.")}static{this.\u0275fac=function(c){return new(c||o)(h(R))}}static{this.\u0275cmp=C({type:o,selectors:[["app-exercice-form"]],decls:36,vars:4,consts:[[1,"create-exercice"],[3,"ngSubmit","formGroup"],["for","question"],["id","question","formControlName","question","type","text"],["for","correct_answer"],["id","correct_answer","formControlName","correct_answer","type","text"],["for","type"],["id","type","formControlName","type"],["value","fill-in-the-blank"],["value","multiple-choice"],[4,"ngIf"],["for","section"],["id","section","formControlName","section_id"],[3,"value",4,"ngFor","ngForOf"],["for","difficulty"],["id","difficulty","formControlName","difficulty"],["value","easy"],["value","medium"],["value","hard"],["for","explanation"],["id","explanation","formControlName","explanation"],["type","submit",3,"disabled"],["formArrayName","options"],[4,"ngFor","ngForOf"],["type","button",3,"click"],["type","text",3,"formControlName"],[3,"value"]],template:function(c,n){if(c&1&&(t(0,"div",0)(1,"h2"),r(2,"Cr\xE9er un Exercice"),i(),t(3,"form",1),x("ngSubmit",function(){return n.createExercice()}),t(4,"label",2),r(5,"Question :"),i(),p(6,"input",3),t(7,"label",4),r(8,"R\xE9ponse Correcte :"),i(),p(9,"input",5),t(10,"label",6),r(11,"Type :"),i(),t(12,"select",7)(13,"option",8),r(14,"Compl\xE9ter les blancs"),i(),t(15,"option",9),r(16,"Choix multiples"),i()(),f(17,z,7,1,"div",10),t(18,"label",11),r(19,"Section :"),i(),t(20,"select",12),f(21,H,2,2,"option",13),i(),t(22,"label",14),r(23,"Difficult\xE9 :"),i(),t(24,"select",15)(25,"option",16),r(26,"Facile"),i(),t(27,"option",17),r(28,"Moyenne"),i(),t(29,"option",18),r(30,"Difficile"),i()(),t(31,"label",19),r(32,"Explication (facultatif) :"),i(),p(33,"textarea",20),t(34,"button",21),r(35," \u2705 Cr\xE9er Exercice "),i()()()),c&2){let s;l(3),a("formGroup",n.exerciceForm),l(14),a("ngIf",((s=n.exerciceForm.get("type"))==null?null:s.value)==="multiple-choice"),l(4),a("ngForOf",n.sections),l(13),a("disabled",n.exerciceForm.invalid)}},dependencies:[F,g,b,B,k,G,j,q,M,w,V,A,I,D],encapsulation:2})}}return o})();export{te as ExerciceFormComponent};
